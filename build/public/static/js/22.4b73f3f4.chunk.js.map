{"version":3,"file":"static/js/22.4b73f3f4.chunk.js","sources":["webpack:///./src/common/actions/auth.js"],"sourcesContent":["import {\r\n    GOOGLE_SIGNIN,\r\n    RECIVE_GOOGLE_SIGNIN,\r\n    FACEBOOK_SIGNIN,\r\n    RECIVE_FACEBOOK_SIGNIN,\r\n    SIGNIN,\r\n    RECIVE_SIGNIN,\r\n    LOGOUT,\r\n    RECEIVE_LOGOUT,\r\n    FETCH_CURRENTUSER,\r\n    RECIVE_CURRENTUSER,\r\n} from './types'\r\n\r\nimport history from '../router/history'\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css'; \r\n\r\nexport const login = values => async (dispatch,getState,api) => {\r\n\r\n    var bodyFormData = new FormData();\r\n    bodyFormData.set('username', values.username);\r\n    bodyFormData.set('password', values.password);\r\n    try {\r\n        dispatch({ type: SIGNIN });\r\n        const res = await api.post('/users/login',bodyFormData,{ headers: {'Content-Type': 'multipart/form-data' }});\r\n        console.log('loginres',res)\r\n        //ToDo query\r\n        history.push('/')\r\n        toast.success(\"Login Successful\", {\r\n            position: toast.POSITION.TOP_RIGHT\r\n        });\r\n        dispatch({ type: RECIVE_SIGNIN, payload: res.data });\r\n    }catch(e){\r\n        console.log('catch',e);\r\n        dispatch({ type: RECIVE_SIGNIN, payload: {} });\r\n    }\r\n}\r\n\r\n\r\nexport const signup = values => async (dispatch,getState,api) => {\r\n\r\n    var bodyFormData = new FormData();\r\n    bodyFormData.set('username', values.username);\r\n    bodyFormData.set('email', values.email);\r\n    bodyFormData.set('password', values.password);\r\n    try {\r\n        dispatch({ type: SIGNIN });\r\n        const res = await api.post('/users/signup',bodyFormData,{ headers: {'Content-Type': 'multipart/form-data' }});\r\n        console.log('signupres',res)\r\n        //ToDo query\r\n        history.push('/')\r\n        dispatch({ type: RECIVE_SIGNIN, payload: res.data });\r\n    }catch(e){\r\n        console.log('catch',e);\r\n        dispatch({ type: RECIVE_SIGNIN, payload: {} });\r\n    }\r\n}\r\n\r\nexport const logout = () => async (dispatch,getState,api) => {\r\n    try {\r\n        dispatch({ type: LOGOUT })\r\n        const res = await api.get('/users/logout')\r\n        \r\n        dispatch({ type: RECEIVE_LOGOUT ,payload :res.data })\r\n    }catch(e){\r\n        console.log(e);\r\n        dispatch({ type: RECEIVE_LOGOUT, payload: {} });\r\n    }\r\n}\r\n\r\nexport const currentUser = () => async (dispatch,getState,api) => {\r\n    try {\r\n        dispatch({ type: FETCH_CURRENTUSER })\r\n        const res = await api.get('/users/currentuser')\r\n        console.log('currentUser',res)\r\n        dispatch({ type: RECIVE_CURRENTUSER, payload: res.data })\r\n    }catch(e){\r\n        dispatch({ type: RECIVE_CURRENTUSER, payload: {} });\r\n    }\r\n}\r\n\r\nexport const googleSign = code => async (dispatch, getState, api) => {\r\n    console.log(history)\r\n    try {\r\n        dispatch({ type: GOOGLE_SIGNIN })\r\n        const res = await api.get(`/users/googlelogin?code=${code}`)\r\n        history.push('/')\r\n        dispatch({ type: RECIVE_GOOGLE_SIGNIN, payload: res.data })\r\n    }catch(e){\r\n        dispatch({ type: RECIVE_GOOGLE_SIGNIN, payload: {} })\r\n    }\r\n}\r\n\r\n//ToDo Facebook Sign\r\n\r\n"],"mappings":"AAiBA","sourceRoot":""}